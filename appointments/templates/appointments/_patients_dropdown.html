<div>
  <label class="block text-gray-700 font-medium mb-1">Ø§Ø®ØªØ± Ø§Ù„Ù…Ø±ÙŠØ¶:</label>

  <select name="patient"
          x-model="selectedPatient"
          @change="handlePatientChange($event)"
          class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
          required>
    <!-- Ø®ÙŠØ§Ø± Ø§ÙØªØ±Ø§Ø¶ÙŠ + Ø¥Ø¶Ø§ÙØ© Ù…Ø±ÙŠØ¶ -->
    <option value="" disabled selected>Ø§Ø®ØªØ± Ø§Ù„Ù…Ø±ÙŠØ¶...</option>
    <option value="new">â• Ø¥Ø¶Ø§ÙØ© Ù…Ø±ÙŠØ¶ Ø¬Ø¯ÙŠØ¯</option>

    {# ÙÙŠ Ø­Ø§Ù„ Ù…Ø±Ø±Ù†Ø§ Ù‚ÙˆØ§Ø¦Ù… Ù…Ù†ÙØµÙ„Ø© Ù…Ù† Ø§Ù„Ù€ view #}
    {% if patients_active is not None and patients_archived is not None %}
      <optgroup label="Ø§Ù„Ù…Ø±Ø¶Ù‰ Ø§Ù„Ø­Ø§Ù„ÙŠÙŠÙ†">
        {% for p in patients_active %}
          <option value="{{ p.id }}">ğŸŸ¢ {{ p.name }}</option>
        {% empty %}
          <option value="" disabled>Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø±Ø¶Ù‰ Ø­Ø§Ù„ÙŠÙŠÙ†</option>
        {% endfor %}
      </optgroup>

      <optgroup label="Ø§Ù„Ù…Ø±Ø¶Ù‰ Ø§Ù„Ù‚Ø¯Ø§Ù…Ù‰">
        {% for p in patients_archived %}
          <option value="{{ p.id }}">âš« {{ p.name }}</option>
        {% empty %}
          <option value="" disabled>Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø±Ø¶Ù‰ Ù‚Ø¯Ø§Ù…Ù‰</option>
        {% endfor %}
      </optgroup>

    {# fallback: ÙÙŠ Ø­Ø§Ù„ Ù…Ø§ Ù…Ø±Ø±Ù†Ø§ Ø§Ù„Ù‚ÙˆØ§Ø¦Ù… Ø§Ù„Ù…Ù†ÙØµÙ„Ø©ØŒ Ù†Ø³ØªØ®Ø¯Ù… patients #}
    {% elif patients %}
      <optgroup label="Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø±Ø¶Ù‰">
        {% for p in patients %}
          <option value="{{ p.id }}">{{ p.name }}</option>
        {% empty %}
          <option value="" disabled>Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø±Ø¶Ù‰</option>
        {% endfor %}
      </optgroup>
    {% else %}
      <option value="" disabled>Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø±Ø¶Ù‰</option>
    {% endif %}
  </select>
</div>
