{% extends 'base.html' %}
{% block content %}

<div class="p-6 space-y-6">

  <!-- โ ุงูุนููุงู + ุฒุฑ ุงูุฅุถุงูุฉ -->
  <div class="flex justify-between items-center">
    <h1 class="text-2xl font-bold text-gray-800">ูุงุฆูุฉ ุงูููุงุชูุฑ ๐ต</h1>
    <a href="{% url 'invoices:create' %}" 
       class="px-4 py-2 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition text-sm font-medium shadow">
      + ุฅุถุงูุฉ ูุงุชูุฑุฉ ุฌุฏูุฏุฉ
    </a>
  </div>

  <!-- ๐ฐ ุงูุฅุญุตุงุฆูุงุช ุงูุณุฑูุนุฉ -->
  <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
    <div class="bg-green-50 border border-green-200 rounded-2xl p-4 shadow-sm">
      <p class="text-sm text-gray-600">ุฅุฌูุงูู ุงูุฏุฎู</p>
      <p class="text-2xl font-bold text-green-700">{{ total_income }} IQD</p>
    </div>
    <div class="bg-yellow-50 border border-yellow-200 rounded-2xl p-4 shadow-sm">
      <p class="text-sm text-gray-600">ุงูููุงุชูุฑ ุบูุฑ ุงููุฏููุนุฉ</p>
      <p class="text-2xl font-bold text-yellow-700">{{ unpaid_count }}</p>
    </div>
    <div class="bg-blue-50 border border-blue-200 rounded-2xl p-4 shadow-sm">
      <p class="text-sm text-gray-600">ุนุฏุฏ ุงูููุงุชูุฑ</p>
      <p class="text-2xl font-bold text-blue-700">{{ invoice_count }}</p>
    </div>
  </div>

  <!-- ๐งพ ุฌุฏูู ุงูููุงุชูุฑ -->
  <div class="bg-white rounded-2xl shadow border border-gray-200 overflow-hidden">
    <table class="min-w-full text-sm text-left">
      <thead class="bg-gray-100 text-gray-700 uppercase text-xs">
        <tr>
          <th class="px-6 py-3">ุงููุฑูุถ</th>
          <th class="px-6 py-3">ุงููุจูุบ</th>
          <th class="px-6 py-3">ุงูุญุงูุฉ</th>
          <th class="px-6 py-3">ุงูุชุงุฑูุฎ</th>
          <th class="px-6 py-3 text-right">ุงูุฅุฌุฑุงุก</th>
        </tr>
      </thead>
      <tbody>
        {% for invoice in invoices %}
        <tr class="border-b hover:bg-gray-50 transition">
          <td class="px-6 py-3 font-medium text-gray-800">{{ invoice.patient.name }}</td>
          <td class="px-6 py-3 font-semibold text-green-700">{{ invoice.consultation_fee }} IQD</td>
          <td class="px-6 py-3">
            {% if invoice.paid %}
              <span class="px-3 py-1 bg-green-100 text-green-700 text-xs font-medium rounded-full">ูุฏููุนุฉ</span>
            {% else %}
              <span class="px-3 py-1 bg-red-100 text-red-600 text-xs font-medium rounded-full">ุบูุฑ ูุฏููุนุฉ</span>
            {% endif %}
          </td>
          <td class="px-6 py-3 text-gray-600">{{ invoice.date|date:"Y-m-d - h:i A" }}</td>
          <td class="px-6 py-3 text-right space-x-2">
            <a href="{% url 'invoices:update' invoice.id %}" 
               class="text-blue-600 hover:underline">โ๏ธ ุชุนุฏูู</a>
            <a href="{% url 'invoices:delete' invoice.id %}" 
               class="text-red-600 hover:underline">๐๏ธ ุญุฐู</a>
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="5" class="text-center py-6 text-gray-500">
            ูุง ุชูุฌุฏ ููุงุชูุฑ ุญุงููุงู
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

</div>

{% endblock %}
