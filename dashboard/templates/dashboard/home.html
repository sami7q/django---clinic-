{% extends 'base.html' %}
{% block content %}

<div class="p-6 space-y-8">

  <!-- ğŸ‘‹ Ø§Ù„ØªØ±Ø­ÙŠØ¨ -->
  <div class="flex justify-between items-center">
    <h1 class="text-2xl font-bold text-gray-800">ğŸ‘‹ Ø£Ù‡Ù„Ø§Ù‹ {{ request.user.first_name|default:request.user.username }}</h1>
    <p class="text-gray-500">Ø¥Ù„ÙŠÙƒ Ù„Ù…Ø­Ø© Ø³Ø±ÙŠØ¹Ø© Ø¹Ù† Ù†Ø´Ø§Ø· Ø§Ù„Ø¹ÙŠØ§Ø¯Ø© Ø§Ù„ÙŠÙˆÙ…</p>
  </div>

  <!-- ğŸ“Š Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ© -->
  <div class="grid grid-cols-1 md:grid-cols-4 gap-4">

    <div class="bg-white shadow rounded-2xl p-5 border border-gray-200">
      <p class="text-sm text-gray-600 mb-1">ğŸ‘¨â€âš•ï¸ Ø§Ù„Ù…Ø±Ø¶Ù‰</p>
      <h2 class="text-3xl font-bold text-blue-700">{{ total_patients }}</h2>
      <p class="text-xs text-gray-500 mt-1">+{{ today_patients }} Ø§Ù„ÙŠÙˆÙ…</p>
    </div>

    <div class="bg-white shadow rounded-2xl p-5 border border-gray-200">
      <p class="text-sm text-gray-600 mb-1">ğŸ“… Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯</p>
      <h2 class="text-3xl font-bold text-emerald-700">{{ total_appointments }}</h2>
      <p class="text-xs text-gray-500 mt-1">+{{ recent_appointments }} Ø®Ù„Ø§Ù„ 24 Ø³Ø§Ø¹Ø©</p>
    </div>

    <div class="bg-white shadow rounded-2xl p-5 border border-gray-200">
      <p class="text-sm text-gray-600 mb-1">ğŸ’° Ø§Ù„ÙÙˆØ§ØªÙŠØ±</p>
      <h2 class="text-3xl font-bold text-green-700">{{ total_invoices|floatformat:0 }} IQD</h2>
      <p class="text-xs text-gray-500 mt-1">+{{ this_week_invoices|floatformat:0 }} Ù‡Ø°Ø§ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹</p>
    </div>

    <div class="bg-white shadow rounded-2xl p-5 border border-gray-200">
      <p class="text-sm text-gray-600 mb-1">ğŸ‘¥ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ†</p>
      <h2 class="text-3xl font-bold text-indigo-700">{{ users_count }}</h2>
      <p class="text-xs text-gray-500 mt-1">Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø³Ø¬Ù„ÙŠÙ† ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù…</p>
    </div>

  </div>

  <!-- ğŸ§¾ Ø¢Ø®Ø± Ø§Ù„Ù…Ø±Ø¶Ù‰ -->
  <div class="bg-white rounded-2xl shadow border border-gray-200 mt-8">
    <div class="flex justify-between items-center border-b px-6 py-3 bg-gray-50">
      <h2 class="font-semibold text-gray-700">ğŸ§¾ Ø¢Ø®Ø± Ø§Ù„Ù…Ø±Ø¶Ù‰ Ø§Ù„Ù…Ø³Ø¬Ù„ÙŠÙ†</h2>
      <a href="{% url 'patients:list' %}" class="text-blue-600 text-sm hover:underline">Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„</a>
    </div>

    <table class="min-w-full text-sm text-left">
      <thead class="bg-gray-100 text-gray-700 uppercase text-xs">
        <tr>
          <th class="px-6 py-3">Ø§Ù„Ø§Ø³Ù…</th>
          <th class="px-6 py-3">Ø§Ù„Ø¹Ù…Ø±</th>
          <th class="px-6 py-3">ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ³Ø¬ÙŠÙ„</th>
          <th class="px-6 py-3 text-right">Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡</th>
        </tr>
      </thead>
      <tbody>
        {% for p in recent_patients %}
        <tr class="border-b hover:bg-gray-50 transition">
          <td class="px-6 py-3">{{ p.name }}</td>
          <td class="px-6 py-3">{{ p.age }}</td>
          <td class="px-6 py-3">{{ p.created_at|date:"d F Y" }}</td>
          <td class="px-6 py-3 text-right">
            <a href="{% url 'patients:detail' p.id %}" class="text-blue-600 hover:underline">Ø¹Ø±Ø¶</a>
          </td>
        </tr>
        {% empty %}
        <tr><td colspan="4" class="text-center py-6 text-gray-500">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø±Ø¶Ù‰ Ø¨Ø¹Ø¯</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

</div>

{% endblock %}
